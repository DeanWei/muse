# 调度系统测试用例

## 一、调度逻辑相关

1. 定时任务一天跑一次    
1）输入：  
    A(0 0 12 * * ?）  
2）输出：每天12:00开始运行任务

2. 定时任务一天跑多次  
1）输入：  
    A(0 0 0/1 * * ?)  
2）输出：每天0点开始，每隔一小时运行一次

3. 前置任务每天运行一次，依赖任务(有自己的调度时间)每天运行一次  
1）输入：  
   A(0 0 12 * * ?)  
   |   
   B(0 0 15 * * ?)  
2) 输出：  
   任务A每天12:00开始跑，任务B每天15:00开始跑
   
4. 前置任务每天运行一次，依赖任务没有自己的调度时间   
1）输入：  
   A(0 0 12 * * ?)  
   |   
   B  
2) 输出：  
   任务A每天12:00开始跑，任务B在任务A跑完之后马上开始跑
   
5. 前置任务每天运行多次，依赖任务(有自己的调度时间)每天运行一次，必须指定依赖于前置任务最近几次  
1）输入：  
   A(0 0 0/1 * * ?)  
   |   
   B(0 30 23 * * ?), offset=>lasttime:24   
2) 输出：  
   任务A每天0点开始跑，每隔一小时跑一次增量数据，任务B每天23:30开始跑，必须依赖于当天任务A 24次全部成功才开始跑。
   
6. 前置任务每天运行多次，依赖任务(有自己的调度时间)每天运行多次，不需要指定依赖于前置任务多少次  
1）输入：  
   A(0 0 0/1 * * ?)  
   |  
   B(0 0 6/6 * * ?)   
2) 输出：  
   任务A每天0点开始跑，每隔一小时跑一次增量数据，任务B每天6点开始跑，不是必须要指定依赖于A多少次。比如第一次B依赖于5个A的数据，第二次B依赖于7个A的数据，B一天的数据也不会遗漏。
   
7. 前置任务每天运行多次，依赖任务没有自己的调度时间，则周期和前置任务一样  
1）输入：  
   A(0 0 0/2 * * ?)  
   |  
   B   
2) 输出：  
   任务A每天0点开始跑，每隔2小时跑一次，每次A跑成功之后，B就开始跑。
   
8. 依赖任务依赖于前置任务过去3天所有数据  
1）输入：  
   A(0 0 0/1 * * ?)   
   |  
   B(0 0 12 * * ?)，offset=>lastday:3   
2) 输出：  
   任务A每天0点开始跑，每隔一小时跑一次增量数据，任务B每天12点开始跑，依赖于任务A过去3天所有task成功。
   
9. 依赖任务依赖于前置任务过去2周所有数据  
1）输入：  
   A(0 0 0/1 * * ?)  
   |  
   B(0 0 12 * * ?)，offset=>lastweek:2    
2) 输出：  
   任务A每天0点开始跑，每隔一小时跑一次增量数据，任务B每天12点开始跑，依赖于任务A过去2周所有task成功。
   
10. 依赖任务依赖于前置任务过去1月所有数据  
1）输入：  
   A(0 0 0/1 * * ?)  
   |     
   B(0 0 12 * * ?)，offset=>lastmonth:1  
2) 输出：  
   任务A每天0点开始跑，每隔一小时跑一次增量数据，任务B每天12点开始跑，依赖于任务A过去1个月所有task成功。
  
  
11. 依赖多个任务，前置任务每天运行一次，依赖任务指定运行时间  
1）输入：  
 A(0 0 12 * * ?), B(0 0 13 * * ?), C(0 0 14 * * ?)   
  A   B  
   \ /  
    C  
2) 输出：  
   任务A每天12点运行一次，任务B每天13点运行一次，任务C每天14点运行，且必须A和B都成功。
   
12. 依赖多个任务，前置任务每天运行一次，依赖任务没有指定运行时间    
1）输入：  
 A(0 0 12 * * ?), B(0 0 13 * * ?), C    
  A   B  
   \ /  
    C  
2) 输出：  
   任务A每天12点运行一次，任务B每天13点运行一次，任务A和B跑完，任务C马上运行。
   
   
13. 依赖多个任务，前置任务周期相同，且每天运行多次，依赖任务有自己的调度时间，且每天运行一次，必须指定依赖于前置任务多少次   
1）输入：  
 A(0 0 0/2 * * ?), B(0 0 0/2 * * ?), C(0 0 23 * * ?)  
 offset=> C->A lasttime:12, C->B lasttime:12    
  A   B  
   \ /  
    C  
2) 输出：  
   任务A和任务B每天0点开始跑，每隔2小时跑一次，任务C 23:00点开始跑，且依赖于任务A和任务B当天12次都要完成。
   
14. 依赖多个任务，前置任务周期不同，且每天运行多次，依赖任务有自己的调度时间，且每天运行一次，必须指定依赖于前置任务多少次   
1）输入：  
 A(0 0 0/2 * * ?), B(0 0 0/3 * * ?), C(0 0 23 * * ?)  
 offset=> C->A lasttime:12, C->B lasttime:8    
  A   B  
   \ /  
    C  
2) 输出：  
   任务A和任务B每天0点开始跑，每隔2小时跑一次，任务C 23:00点开始跑，且依赖于任务A当天12次成功，依赖任务B当天8次成功。
   
15. 依赖多个任务，前置任务周期相同，且每天运行多次，依赖任务有自己的调度时间，且每天运行多次，不必指定依赖于前置任务多少次   
1）输入：  
 A(0 0 0/2 * * ?), B(0 0 0/2 * * ?), C(0 0 6/6 * * ?)   
  A   B  
   \ /  
    C  
2) 输出：  
   任务A和任务B每天0点开始跑，每隔2小时跑一次，任务C每天6点开始跑，每隔6小时跑一次，在每次调度周期内A和B都成功，即可开始调度。
   
16. 依赖多个任务，前置任务周期不同，且每天运行多次，依赖任务有自己的调度时间，且每天运行多次，不必指定依赖于前置任务多少次   
1）输入：  
 A(0 0 0/2 * * ?), B(0 0 0/3 * * ?), C(0 0 6/6 * * ?)   
  A   B  
   \ /  
    C  
2) 输出：  
   任务A每天0点开始跑，每隔2小时跑一次，任务B每天0点开始跑，每隔3小时跑一次，任务C每天6点开始跑，每隔6小时跑一次，在每次调度周期内A和B都成功，即可开始调度。（同15）
   


